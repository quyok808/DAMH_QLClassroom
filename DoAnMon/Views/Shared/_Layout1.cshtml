@using DoAnMon.IdentityCudtomUser
@using Microsoft.AspNetCore.Identity
@inject SignInManager<CustomUser> SignInManager
@inject UserManager<CustomUser> UserManager

@using Microsoft.AspNetCore.Authorization

@inject IAuthorizationService AuthorizationService

@{
	var user = await UserManager.GetUserAsync(User);
	var fullname = user?.Name;
	var LISTROOM = ViewBag.ListRoom as List<ClassRoom>;
}

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>ONLYA</title>

	<!-- BOOTSTRAP STYLES-->
	<link href="/assets/css/bootstrap.css" rel="stylesheet" />
	<link rel="stylesheet" href="/assets/css/bootstrap.min.css">
	<!-- FONTAWESOME STYLES-->
	<link href="/assets/css/font-awesome.css" rel="stylesheet" />
	<!--CUSTOM BASIC STYLES-->
	<link href="/assets/css/basic.css" rel="stylesheet" />
	<!--CUSTOM MAIN STYLES-->
	<link href="/assets/css/custom.css" rel="stylesheet" />
	<!-- GOOGLE FONTS-->
	<link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' />

	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,400;0,700;0,900;1,300;1,400;1,700;1,900&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,400;0,700;0,900;1,300;1,400;1,700;1,900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,400;0,700;0,900;1,300;1,400;1,700;1,900&family=Oswald:wght@200..700&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
	<!-- Bootstrap Icons -->
	<link rel='stylesheet' href='https://cdn-uicons.flaticon.com/2.3.0/uicons-bold-straight/css/uicons-bold-straight.css'>
	<link rel='stylesheet' href='https://cdn-uicons.flaticon.com/2.3.0/uicons-regular-straight/css/uicons-regular-straight.css'>
	<link rel='stylesheet' href='https://cdn-uicons.flaticon.com/2.3.0/uicons-bold-rounded/css/uicons-bold-rounded.css'>
	<link rel='stylesheet' href='https://cdn-uicons.flaticon.com/2.3.0/uicons-regular-rounded/css/uicons-regular-rounded.css'>

	<link rel="icon" href="/pics/exam.ico" type="image/x-icon">
	<style>
		.carousel-indicators li {
			background-color: #6c6c6c;
		}

		.carousel-indicators .active {
			background-color: #0e8b00;
		}
	</style>
</head>
<body>

	<div id="wrapper" style="background-color: white;">
		<div class="container">
			<div id="myCarousel" class="carousel slide" data-ride="carousel">
				<!-- Indicators -->
				<ol class="carousel-indicators">
					<li data-target="#myCarousel" data-slide-to="0" class="active"></li>
					<li data-target="#myCarousel" data-slide-to="1"></li>
					<li data-target="#myCarousel" data-slide-to="2"></li>
				</ol>

				<!-- Wrapper for slides -->
				<div class="carousel-inner">

					<div class="item active">
						<img src="/Images/banner_google.png" alt="Los Angeles" style="width: 100%; height: 233px;">
					</div>

					<div class="item">
						<img src="/Images/LOGO.png" alt="Los Angeles" style="width: 100%; height: 233px;">
					</div>

					<div class="item">
						<img src="/Images/banner_google.png" alt="Los Angeles" style="width: 100%; height: 233px;">
					</div>

				</div>
			</div>
		</div>
		<nav class="navbar navbar-default navbar-cls-top " role="navigation" style="margin-bottom: 0;">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".sidebar-collapse">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<div class="navbar-brand" style="background-color: transparent!important;">
					<a href="/" style="text-decoration: none; color: aliceblue;">
						<h2 style=" font-family:Merriweather, serif; font-size: 33px; font-style: normal; font-weight:bolder">
							Trang chủ
						</h2>
					</a>
				</div>
			</div>
			<div class="header-right" style="text-align: center;">
				@{
					if (User.IsInRole("Teacher") || User.IsInRole("Admin"))
					{
						<div style="display: inline-block;">
							<a href="/ClassRooms/Create" class="btn btn-info" title="Create Classroom" style="background-color: #7fb3d5">
								<b style="font-size: 18px; display: inline-block;">Quản lý</b>
							</a>
						</div>
					}
				}	
				<div style="display: inline-block;">
					<div>
						<button id="btnAddRoom" class="btn btn-primary" data-toggle="modal" data-target="#joinRoomModal" style="font-size: 18px; font-weight: bold;background-color: #1c7845">
							Tham gia
						</button>

					</div>

					<div id="joinRoomModal" class="modal" tabindex="-1">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header" style="margin-bottom: 10px; border-bottom: none">
									<button type="button" class="close" data-dismiss="modal" aria-label="Close">
										<span aria-hidden="true">&times;</span>
									</button>
									<h5 class="modal-title" style="font-size:30px;font-weight:bold; color: #FA7070">THAM GIA PHÒNG HỌC</h5>
								</div>


								<form id="joinRoomForm" action="/ClassRooms/JoinClassV1" method="post">
									<div class="col-md-12" style="width: 100%">
										<div asp-validation-summary="ModelOnly" class="text-danger"></div>
										<div class="form-group">
											<label for="ClassRoomId" class="control-label" style="color: black; text-align: left; display: block; margin:10px 0">Mã phòng học:</label>
											<input name="ClassRoomId" id="ClassRoomId" class="form-control custom-input-width" required />
											<span id="ClassRoomIdError" class="text-danger"></span>
										</div>
									</div>
									<div class="modal-footer" style="border-top: 1px solid #e5e5e5; padding-top: 10px">
										<button type="button" class="btn btn-secondary" data-dismiss="modal" style="font-weight:bold; background-color: grey; font-size: 16px">Đóng</button>
										<input style="font-size: 16px; font-weight:bold" type="submit" value="Tham gia" class="btn btn-primary" />
									</div>
								</form>
							</div>
						</div>
					</div>
				</div>
				<div style="display: inline-block;">
					<form class="form-inline dropdown-item" asp-area="Identity" asp-page="/Account/Logout" asp-route-returnUrl="@Url.Action("Index", "Home", new { area = "" })">
						<button type="submit" class="btn btn-danger" style="font-size: 18px; font-weight: bold;">Logout</button>
					</form>
				</div>
			</div>

		</nav>
		<!-- /. NAV TOP  -->
		<nav class="navbar-default navbar-side" role="navigation">
			<div class="sidebar-collapse">
				<ul class="nav" id="main-menu">
					<li>
						<a href="/Identity/Account/Manage/Index" style="padding: 0; margin-bottom: -1px;">
							<div class="user-img-div" style="padding: 10px 15px 0 0;">
								@{
									if (user != null)
									{
										<div class="col-md-6" style="margin-bottom: 10px">
											<img src="~/Imgs_avtUser/@user.UrlAvt" class="img-thumbnail img-fluid" style="width: 122.5px; height: auto; height: 160.13px;" onerror="this.onerror=null; this.src='/Images/avatar.jpg';" />
										</div>
										<div class="col-md-6" style="margin-left: 0; padding-left: 0; align-items: center; padding-top: 15px;">
											<p style="line-height: 30px; font-weight: bold; font-size: 20px; padding-bottom: 30px;">@fullname</p>
											<p style="font-weight: bold; font-size: 20px;">@user.Mssv</p>
										</div>
									}
								}
							</div>
						</a>
					</li>


					<li>
						<a class="active-menu" href="/ClassRooms/Index" style="font-family: Poppins, sans-serif; font-size: 16px"></i>Danh sách lớp học</a>
					</li>
					<li>
						<a class="getallhw" href="/ClassRooms/GetAllHomeWork" style="font-family: Poppins, sans-serif;font-size: 16px"
						   ">Bài Tập</a>
					</li>
					@{
						foreach(var item in LISTROOM)
						{
							<li>
								<div style="background-color: white!important; width: 320px; height:55.89px; display:grid; place-items: center;padding: 0;">
									<a asp-action="Details" asp-controller="ClassRooms" asp-route-id="@item.Id"
									   style="
											background-color: pink;
											border-radius: 10px;
											width: 95%;
											height: 80%;
											display: grid;
											place-items: center;
											font-size: 20px;
											font-weight:bold;
											font-family: Poppins, sans-serif;">@item.Name</a>
								</div>
							</li>
						}
					}
				</ul>

			</div>

		</nav>
		<!-- /. NAV SIDE  -->
		<div id="page-wrapper">
			<div id="page-inner">
				<!-- Renderbody() -->
				@RenderBody()
				<!-- END Renderbody() -->
			</div>
			<!-- /. PAGE INNER  -->
		</div>
		<!-- /. PAGE WRAPPER  -->
	</div>
	<!-- /. WRAPPER  -->

	<div id="footer-sec" style="text-align: center;">
		&copy; 2024 ONLYA | Design By : <a href="http://www.binarytheme.com/" target="_blank">ONLYA</a>
	</div>
	<!-- /. FOOTER  -->
	<!-- SCRIPTS -AT THE BOTOM TO REDUCE THE LOAD TIME-->
	<!-- JQUERY SCRIPTS -->
	<script src="/assets/js/jquery-1.10.2.js"></script>
	<!-- BOOTSTRAP SCRIPTS -->
	<script src="/assets/js/bootstrap.js"></script>
	<script src="/assets/js/bootstrap.bundle.min.js"></script>
	<!-- METISMENU SCRIPTS -->
	<script src="/assets/js/jquery.metisMenu.js"></script>
	<!-- CUSTOM SCRIPTS -->
	<script src="/assets/js/custom.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/popperjs/core@1.16.1/dist/umd/popper.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

	<script>
		$(document).ready(function () {
			$("#btnAddRoom").click(function () {
				$("#addRoomModal").modal('show');
			});


			$(".btn-info").click(function () {
				$(this).closest("tr").find(".room-description").toggle();
			});
		});
	</script>


	@RenderSection("Scripts", required: false)
</body>
</html>
