@{
    ViewData["Title"] = "Posts List";
    Layout = "~/Areas/Admin/Views/Shared/_LayoutAdmin.cshtml";
}
<style>
    #posts_container {
        display: grid;
        grid-template-columns: repeat(5, 1fr); /* Tạo 6 cột đều nhau */
        gap: 40px; /* Thêm khoảng cách giữa các bài đăng */
        position: relative; /* Để định vị các nút tương đối với container */
        margin: 40px;
    }

    .post {
        border: 1px solid #ccc; /* Tuỳ chọn: Thêm viền cho mỗi bài đăng */
        padding: 10px; /* Tuỳ chọn: Thêm khoảng đệm cho mỗi bài đăng */
        background-color: #ffffff; /* Tuỳ chọn: Thêm màu nền cho mỗi bài đăng */
        border-radius: 5px;
        text-align: left; /* Tuỳ chọn: Căn giữa nội dung bên trong mỗi bài đăng */
        position: relative; /* Để định vị các nút tương đối với bài đăng */
        /* overflow: hidden; /* Ẩn phần nội dung vượt quá */ */ height: 350px;
        display: flex;
        flex-direction: column;
        justify-content: normal;
    }

        .post img {
            max-width: 100%; /* Đảm bảo hình ảnh vừa với bài đăng */
            height: auto; /* Duy trì tỷ lệ hình ảnh */
        }

        .post h3 {
            font-size: 18px;
        }

    .post-content {
        max-height: 320px; /* Chiều cao tối đa cho nội dung */
        text-align: left; /* Căn trái nội dung */
        /*  margin-top: 10px; /* khoảng cách từ hình ảnh tới nội dung */ */ padding: 10px;
        box-sizing: border-box;
        overflow: hidden;
    }

    /*   .wrapper {
            display: flex;
            flex-direction: column;
            min-height: 200vh;
        }

        main {
            flex: 1;
        }
     */
    footer {
        background-color: black;
        color: white;
        padding: 20px;
    }

    .buttons {
        display: flex;
        justify-content: center;
        margin-top: 10px;
        position: absolute; /* Định vị tuyệt đối các nút */
        top: 250px; /* Điều chỉnh vị trí theo ý muốn */
        width: 100%;
        left: 0;
    }

        .buttons button {
            padding: 5px 10px;
            cursor: pointer;
            border-radius: 5px;
        }
</style>
<header>
    <nav class="navbar navbar-expand-sm navbar-toggleable-sm navbar-light bg-white border-bottom box-shadow ">
        <div class="container-fluid">


            @if (User.Identity.IsAuthenticated)
            {
                <a class="navbar-brand" href="/" style="font-family: 'Poppins', sans-serif; padding: 0">
                    <img src="/images/Logo_Web.png" alt="Logo" width="70" height="auto">
                </a>

            }
            else
            {
                <a class="navbar-brand" asp-controller="ClassRooms" asp-action="Index" style="font-family: 'Poppins', sans-serif; padding: 0">
                    <img src="/images/Logo_Web.png" alt="Logo" width="70" height="auto">
                </a>

            }

            @*  @if (User.Identity.IsAuthenticated)
            {
            <a class="navbar-brand" asp-area="" asp-controller="ClassRooms" asp-action="Index" style="font-family: 'Poppins', sans-serif; padding: 0">
            <img src="/images/Logo_Web.png" alt="Logo" width="70" height="auto">
            </a>

            }
            else
            {
            <a class="navbar-brand" asp-area="" asp-controller="ClassRooms" asp-action="Index" style="font-family: 'Poppins', sans-serif; padding: 0">
            <img src="/images/Logo_Web.png" alt="Logo" width="70" height="auto">
            </a>

            } *@
            @* <a href="/Admin/Home/PhanQuyen" class="admin-link" style="margin-bottom:10px;">QUẢN LÝ NGƯỜI DÙNG</a> *@
            <a href="/Admin/Home/baipost" class="admin-link" style="margin-bottom:10px;">TẠO BÀI POST</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target=".navbar-collapse" aria-controls="navbarSupportedContent"
                    aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="navbar-collapse collapse d-sm-inline-flex justify-content-end">
                <partial name="_LoginPartial" />
            </div>
        </div>
    </nav>
</header>
<div id="posts_container">
    <!-- Danh sách bài viết sẽ được hiển thị ở đây -->
</div>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const postsContainer = document.getElementById("posts_container");

        async function fetchPosts() {
            try {
                const response = await fetch("https://script.google.com/macros/s/AKfycbyf_E0bAmFqn9i1m_efPwvYXPfUYMBJc9KQ_J1jKOwlBwFBFIGxLQ7kpEuK3lQJml7r/exec");
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                const data = await response.json();
                displayPosts(data);
            } catch (error) {
                console.error('Error fetching posts:', error);
            }
        }

        function displayPosts(posts) {
            postsContainer.innerHTML = ''; // Clear existing posts
            posts.forEach(post => {
                const postElement = document.createElement('div');
                postElement.className = 'post';
                postElement.innerHTML = `
                        <div class="post-content">
                        <h3>${post.title}</h3>
                            ${post.image ? `<img src="${post.image}" alt="Hình ảnh bài viết">` : ''}

                            ${post.contents_}
                        </div>
                    `;
                // const buttonsContainer = document.createElement('div');
                // buttonsContainer.className = 'buttons';
                // buttonsContainer.innerHTML = `
                //     <button class="edit-button" style="margin-right:20px" data-id="${post.id}">Sửa</button>
                //     <button class="delete-button" data-id="${post.id}">Xóa</button>
                // `;
                // postElement.appendChild(buttonsContainer);
                postsContainer.appendChild(postElement);
            });
        }
        fetchPosts();
    });
</script>

